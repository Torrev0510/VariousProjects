<title>Arkanoid en JavaScript</title>
<style>
    body {
        background-color: grey;
    }

    canvas{
        border: 4px solid #fff;
        border-bottom: transparent;
        background: #000;
        margin: 0 auto;
        display: block;
    }
</style>

<canvas></canvas>

<script>
    const canvas = document.querySelector('canvas')
    const ctx = canvas.getContext('2d')

    canvas.width = 448
    canvas.height = 400

    //Variables se inicializan aquí
    
    //Variables de la pelota
    const ballRadius = 3;

    //posición de la pelota
    let x = canvas.width / 2
    let y = canvas.height - 30

    //Velocidad de la pelota
    let dx = 2
    let dy = -2

    function drawBall() {
        ctx.beginPath()
        ctx.arc(x, y, ballRadius, 0, Math.PI * 2)
        ctx.fillStyle = '#fff'
        ctx.fill()
        ctx.closePath()
    }

    function drawPaddle(){

    }

    function drawBricks(){

    }

    function collisionDetection(){

    }

    function ballMovement(){
        //rebotar las pelotas en los laterales
        if(x + dx > canvas.width - ballRadius || x + dx < ballRadius)
        {
            dx = -dx
        }

        //rebotar las pelotas en la parte de arriba
        if(y + dy < ballRadius)
        {
            dy = -dy
        }

        //Eliminado porque detecta que has tocado el borde inferior
        if(y + dy > canvas.height - ballRadius){
            console.log('Game Over')
            document.location.reload()
        }

        x += dx
        y += dy
    }

    function paddleMovement(){

    }

    function cleanCanvas(){
        ctx.clearRect(0, 0, canvas.width, canvas.height)
    }


    //la funcion draw lo que hace es una programación para llamarse a si misma y es lo que se encargará de realizar las acciones que necesiten de movimiento
    function draw() {
        //funciones a ejecutar cada vez se realiza aquí
        
        cleanCanvas()

        //Aquí se dibujan los elementos
        drawBall()
        drawPaddle()
        drawBricks()
        // drawScore()

        //Colisiones y movimientos
        collisionDetection()
        ballMovement()
        paddleMovement()

        //este metodo que se llama se ejecuta cada vez que se hace un refresco de un frame en la pantalla 60Hz = 60 refrescos/segundo 
        window.requestAnimationFrame(draw)
    }

    draw()
</script>